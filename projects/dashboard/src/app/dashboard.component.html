<div class="dashboard-container">
  <header class="header">
    <div class="header-content">
      <div class="title">
        <h1>📊 Dashboard de Vendas & Produção</h1>
        <p>Análise completa das vendas e produção da cooperativa</p>
      </div>
      <div class="filters">
        <label for="periodo">Período:</label>
        <select
          id="periodo"
          [(ngModel)]="periodoSelecionado"
          (change)="onPeriodoChange()"
          class="periodo-select">
          <option *ngFor="let option of periodoOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>
    </div>
  </header>

  <section class="metrics-section">
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-icon">💰</div>
        <div class="metric-content">
          <h3>{{ totalVendas }}</h3>
          <p>Total de Vendas</p>
          <small>No período selecionado</small>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">💵</div>
        <div class="metric-content">
          <h3>R$ {{ valorTotalVendas | number:'1.2-2' }}</h3>
          <p>Valor Total</p>
          <small>Receita bruta</small>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">📈</div>
        <div class="metric-content">
          <h3>R$ {{ lucroTotal | number:'1.2-2' }}</h3>
          <p>Lucro Estimado</p>
          <small>30% de margem</small>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">📦</div>
        <div class="metric-content">
          <h3>{{ produtosVendidos }}</h3>
          <p>Produtos Vendidos</p>
          <small>Unidades vendidas</small>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">📊</div>
        <div class="metric-content">
          <h3>R$ {{ mediaVendas | number:'1.2-2' }}</h3>
          <p>Média por Venda</p>
          <small>Ticket médio</small>
        </div>
      </div>
    </div>
  </section>

  <section class="charts-section">
    <div class="charts-grid">
      <div class="chart-card">
        <div class="chart-header">
          <h3>📈 Evolução de Vendas</h3>
          <p>Vendas por dia no período selecionado</p>
        </div>
        <div class="chart-container">
          <app-sales-evolution-chart
            [data]="vendasData"
            [period]="periodoSelecionado">
          </app-sales-evolution-chart>
        </div>
      </div>

      <div class="chart-card">
        <div class="chart-header">
          <h3>🥗 Produtos por Categoria</h3>
          <p>Distribuição dos produtos cadastrados</p>
        </div>
        <div class="chart-container">
          <app-category-chart
            [data]="categoriasData">
          </app-category-chart>
        </div>
      </div>

      <div class="chart-card">
        <div class="chart-header">
          <h3>🏆 Top Produtos Vendidos</h3>
          <p>Produtos mais vendidos</p>
        </div>
        <div class="chart-container">
          <app-top-products-chart
            [data]="topProdutosData">
          </app-top-products-chart>
        </div>
      </div>
    </div>
  </section>

  <section class="recent-sales-section">
    <div class="section-header">
      <h2>🕒 Vendas Recentes</h2>
    </div>

    <div class="sales-table-container">
      <table class="sales-table">
        <thead>
          <tr>
            <th>Data</th>
            <th>Produto</th>
            <th>Quantidade</th>
            <th>Valor Total</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let venda of getVendasRecentes()" class="sale-row">
            <td>{{ formatarData(venda.dataVenda) }}</td>
            <td>
              <strong>{{ venda.produtoNome }}</strong>
            </td>
            <td>{{ venda.quantidade }}</td>
            <td>
              <span class="sale-amount">
                R$ {{ venda.precoTotal | number:'1.2-2' }}
              </span>
            </td>
            <td>
              <span class="status-badge success">✅ Concluída</span>
            </td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="getVendasRecentes().length === 0" class="empty-state">
        <div class="empty-icon">📊</div>
        <h3>Nenhuma venda registrada</h3>
        <p>As vendas aparecerão aqui quando forem registradas no sistema de estoque.</p>
      </div>
    </div>
  </section>

  <section class="insights-section">
    <div class="insights-grid">
      <div class="insight-card">
        <div class="insight-icon">🎯</div>
        <div class="insight-content">
          <h4>Meta de Vendas</h4>
          <p>Baseado nas vendas atuais, você está no caminho certo para atingir suas metas mensais.</p>
        </div>
      </div>

      <div class="insight-card">
        <div class="insight-icon">📈</div>
        <div class="insight-content">
          <h4>Crescimento</h4>
          <p>Suas vendas estão crescendo consistentemente. Continue focado na qualidade dos produtos!</p>
        </div>
      </div>

      <div class="insight-card">
        <div class="insight-icon">💡</div>
        <div class="insight-content">
          <h4>Dica</h4>
          <p>Considere aumentar o estoque dos produtos mais vendidos para maximizar as vendas.</p>
        </div>
      </div>
    </div>
  </section>
</div>
